<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN" "hmpro6.dtd">
<!--This is the second generation of the website. -->
<HTML> 
  <HEAD> 
	 <TITLE>Fortran 95 Portability Project</TITLE>
<!--$Id: port.html 2.3 2004/10/02 15:28:42Z Dan Release $ -->
<!--Copyright 2002 Purple Sage Computing Solutions, Inc. -->
	 <STYLE TYPE="text/css">
	<!--
		TD P { color: #000000 }
		H2 { color: #000000 }
		P { color: #000000 }
		A:visited { color: #000000 }
	-->
	</STYLE> 
  </HEAD> 
  <BODY BGCOLOR="#ffffff" TEXT="#000000">
<!--This is a part of the table based version of the web site. -->
	 <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="2" WIDTH="550"
	  STYLE="page-break-before: always"> 
		<TR VALIGN="TOP">
<!--This is the narrower left side column. -->
		  <TD ROWSPAN="3"> 
  <!--This paragraph introduces the direct links on the left column. -->
			 <H2 ALIGN="LEFT"><FONT FACE="sans-serif">goto</FONT> </H2>
<!--line below the goto header -->
			 <HR ALIGN="CENTER" WIDTH="75%" SIZE="1" NOSHADE="NOSHADE">
<!--This paragraph links to yet another way to the home page. -->
			 <H2 ALIGN="LEFT"><FONT FACE="sans-serif"><A HREF="index.html"
				TYPE="text/html">Home</A></FONT></H2>
<!--This paragraph links to the free source code page. -->
			 <H2 ALIGN="LEFT"><FONT FACE="sans-serif"><A
				HREF="download.html" TYPE="text/html">Free Source Code</A></FONT> </H2>
<!--This paragraph links to the free source code page. -->
			 <H4 ALIGN="RIGHT"><FONT FACE="sans-serif">Portability Project</FONT>
				</H4>
<!--This paragraph links to the fact sheet page. -->
			 <H2 ALIGN="LEFT"><FONT FACE="sans-serif"><A HREF="fact.html"
				TYPE="text/html">Fact Sheet</A></FONT> </H2>
<!--This graphic solicits email to PSCS. -->
			 <H2 ALIGN="LEFT"><FONT FACE="sans-serif"><A
				HREF="mailto:dnagle@erols.com">Email us</A></FONT> </H2>
<!--line below the last link on the left column -->
			 <HR ALIGN="CENTER" WIDTH="75%"> </TD>
<!--The PSCS Banner running across the top -->
		  <TD> 
			 <H1 ALIGN="CENTER"><FONT FACE="sans-serif"><EM>Purple Sage Computing
				Solutions, Inc.</EM></FONT> </H1> </TD> 
		</TR> 
		<TR VALIGN="TOP">
<!--This is the wider right side column. -->
		  <TD ALIGN="LEFT"> 
  <!--The main home page starts here. -->
			 <P ALIGN="CENTER"><EM> <A NAME="top">Fortran Portability
				Project</A></EM> </P> 
			 <P ALIGN="CENTER"><A HREF="index.html" TYPE="text/html">Home</A>
				<FONT FACE="Symbol">--&gt;</FONT> <A HREF="fact.html" TYPE="text/html">Fact
				Sheet</A> <FONT FACE="Symbol">--&gt;</FONT>
				<A HREF="download.html" TYPE="text/html">Free Source Code</A>
				<FONT FACE="Symbol">--&gt;</FONT> Portability Project </P> 
			 <H2 ALIGN="CENTER"> <FONT FACE="sans-serif">How Portable Can Fortran
				Programs Be?</FONT> </H2> 
			 <P ALIGN="LEFT">The goal of the Portability Project is to create
				software tools to ease the writing of highly portable Fortran programs. This is
				achieved by automatically generating a module which describes as many as
				possible of the processor dependencies left unspecified by the Fortran
				standard. Because the module will give standard names (in the sense that the
				same names will be used on many processors) to processor kinds, it is named
				<A HREF="stdtype.html" TYPE="text/html">standard_types</A>. The values in the
				module allow adaptation during execution to various processors. This module is
				complemented by a standard-conforming <A HREF="coco.html" TYPE="text/html">coco
				preprocessor</A>, which may include an automatically generated include file
				matching the standard_types module. The definitions in the include file allow
				conditional compilation based upon processor characteristics (mainly, which
				kinds are supported). This combination supports the programmer's efforts to
				write highly portable Fortran.</P> 
			 <P ALIGN="LEFT"> To display the contents of
				<A HREF="stdtype.html" TYPE="text/html">standard_types</A> (and as a simple
				test case to verify that standard_types is correct for a given processor),
				there's a program to print the values called <A HREF="pm.html"
				TYPE="text/html">processor_model</A>. Compiling the processor_model program
				requires use of the standard_types module. Both standard_types and
				processor_model are generated by a program (called
				<A HREF="make_pm.html" TYPE="text/html">make_processor_model</A>) that, using a
				small <A HREF="make_pm_nml.html" TYPE="text/html">namelist input file</A>, some
				run-time tests, and some built-in rules will make the other files customized
				for a processor. Compiling the processor_model program doesn't need a
				preprocessor, it automatically matches the standard_types module made by the
				same run of make_processor_model.</P> 
			 <P ALIGN="LEFT">The <A HREF="make_pm_nml.html"
				TYPE="text/html">namelist input file</A> allows the programmer to describe
				those aspects of the processor which can't be automatically diagnosed. The
				program will automatically detect the available integer and real kinds.
				Optionally, there are groups allowing a detailed description of the tests
				performed to determine the numerical kinds and to choose whether logical kinds
				should be defined. </P> 
			 <P ALIGN="LEFT">While Fortran programs are certainly more portable
				than those written in many other high level languages, there are still
				circumstances where conditional compilation is helpful. The Fortran standard
				itself describes a conditional compilation scheme called "coco" in Part 3 of
				the multipart standard. An implementation of the
				<A HREF="coco.html" TYPE="text/html">coco preprocessor</A> may be downloaded
				from <A HREF="coco.html" TYPE="text/html">this page</A>. Also popular are
				<A HREF="http://www.ifremer.fr//ditigo/molagnon/fortran90/contenu.html"
				 TYPE="text/html">Michel Olagnon's f90ppr</A> and the traditional cpp and its
				fpp counterpart. The <A HREF="make_pm.html"
				TYPE="text/html">make_processor_model</A> program will write a file of symbol
				definitions for use with any of these preprocessors. One symbol is defined in
				such a way that code may be included in the compilation depending on the
				existence of any kind that make_processor_model detects or defines from its
				<A HREF="make_pm_nml.html" TYPE="text/html">namelist input file</A>. This is an
				easy way, for example, to write a module supporting every kind available using
				each of several processors. Simply write the module containing the super set of
				kinds supported by all the compilers, and wrap each kind specific entity in
				conditional compilation directives. The compilers' names needn't be used, only
				the symbol defined for each kind. Which kinds are defined is determined by the
				contents of the automatically generated include file.</P> 
			 <P ALIGN="LEFT">To change the <A HREF="stdtype.html"
				TYPE="text/html">standard_types module</A>, the
				<A HREF="pm.html" TYPE="text/html">processor_model program</A> or the
				<A HREF="make_pm.html" TYPE="text/html">preprocessor include file</A>, change
				the <A HREF="make_pm_nml.html" TYPE="text/html">namelist input file</A> and
				rerun the <A HREF="make_pm.html" TYPE="text/html">make_processor_model
				program</A>. The processor_model program should always be compiled using the
				standard_types module written by the same run of make_processor_model as the
				processor_model program. And, of course, your own programs should use a
				preprocessor include file made by the same run of make_processor_model as the
				standard_types module you're using.</P> 
			 <P ALIGN="LEFT">The simplest way to use the tools of the Portability
				Project is to start with the <A HREF="make_pm.html"
				TYPE="text/html">make_processor_model program</A>, make and verify the
				<A HREF="stdtype.html">standard_types module</A> and the
				<A HREF="make_pm.html" TYPE="text/html">preprocessor include file</A>. Then you
				can use the <A HREF="coco.html" TYPE="text/html">coco preprocessor</A> with the
				preprocessor include file matching the standard_types module. The following is
				a step-by-step guide: </P> 
			 <OL ALIGN="LEFT"> 
				<LI ALIGN="LEFT">Download and compile the
				  <A HREF="make_pm.html" TYPE="text/html">make_processor_model program</A>. </LI>
				
				<LI ALIGN="LEFT">Decide whether you want to define kinds for
				  logicals and characters (which can't be diagnosed automatically), and note the
				  kind values. Make a <A HREF="make_pm_nml.html" TYPE="text/html">namelist input
				  file</A> for your processor. You may want to RTFM for this step. You can
				  specify which preprocessor you will be using by naming which include file you
				  want (if any).</LI> 
				<LI ALIGN="LEFT">Run the make_processor_model program in the
				  directory with the <A HREF="make_pm_nml.html" TYPE="text/html">namelist input
				  file</A> ("make_pm.in") file. </LI> 
				<LI ALIGN="LEFT">Check the <A HREF="make_pm.html"
				  TYPE="text/html">make_processor_model</A> logfile to verify that it's correctly
				  diagnosing your processor. </LI> 
				<LI ALIGN="LEFT">Compile the
				  <A HREF="stdtype.html" TYPE="text/html"> standard_types module</A>. Then
				  compile the <A HREF="pm.html" TYPE="text/html">processor_model program</A>. Run
				  it and verify that it gives correct results. If you have an unusual processor,
				  you may have to repeat steps 2. through 5. a few times. </LI> 
				<LI ALIGN="LEFT">Download and compile the
				  <A HREF="coco.html" TYPE="text/html">coco preprocessor</A>. Programs
				  preprocessed with coco may include the coco include file written by
				  <A HREF="make_pm.html" TYPE="text/html">make_processor_model</A>, so the
				  program may be customized for your processor, if need be.</LI> 
				<LI ALIGN="LEFT">Use the <A HREF="stdtype.html"
				  TYPE="text/html">standard_types module</A> and include the include file via the
				  <A HREF="coco.html" TYPE="text/html">coco preprocessor</A> or other
				  preprocessor in your programs. </LI> 
				<LI ALIGN="LEFT">Write your source files in a style which includes
				  kinds for every processor you intend to use or every processor where you think
				  your program will be used if your distributing your source code. The
				  <A HREF="stdtype.html" TYPE="text/html">standard_types module</A> provides
				  consistent names for kinds, and the <A HREF="coco.html" TYPE="text/html">coco
				  preprocessor</A> include file provides conditional compilation consistent with
				  the standard_types module.</LI> 
			 </OL> 
			 <P ALIGN="LEFT">At this point, you should have software which is as
				portable as Fortran can be. It's usually little more than a cut-and-paste and
				change a kind parameter to make a new version of a variable or function for a
				kind not previously supported. Or, you can use coco's text/copy mechanism to
				automatically copy/paste/substitute to create a new version of a procedure.</P>
			 
			 <P ALIGN="LEFT">The <A HREF="make_pm.html"
				TYPE="text/html">make_processor_model program</A> may be downloaded from
				<A HREF="make_pm.html" TYPE="text/html">this page</A>. </P> 
			 <P ALIGN="LEFT">A discussion of the
				<A HREF="make_pm_nml.html" TYPE="text/html">namelist input file</A> for the
				<A HREF="make_pm.html" TYPE="text/html">make_processor_model program</A> is on
				<A HREF="make_pm_nml.html" TYPE="text/html">this page</A>. </P> 
			 <P ALIGN="LEFT">A discussion of the
				<A HREF="stdtype.html" TYPE="text/html">standard_types module</A> is on
				<A HREF="stdtype.html" TYPE="text/html">the page</A>. </P> 
			 <P ALIGN="LEFT">A discussion of the
				<A HREF="pm.html" TYPE="text/html">processor_model program</A> is on
				<A HREF="pm.html" TYPE="text/html">this page</A>. </P> 
			 <P ALIGN="LEFT">The <A HREF="coco.html" TYPE="text/html">coco
				preprocessor</A> may be downloaded from <A HREF="coco.html"
				TYPE="text/html">this page</A>. This page includes an example of using coco.
				</P>
<!--Return to top of this page. -->
			 <P ALIGN="CENTER"><A HREF="#top">Back to the Top</A> </P> </TD> 
		</TR>
<!--The page footer -->
		<TR> 
		  <TD> <HR SIZE="1" NOSHADE="NOSHADE">
<!--Yet another batch of links to other pages. -->
			 <P ALIGN="CENTER"> <A HREF="index.html" TYPE="text/html">Home</A> -
				<A HREF="fact.html" TYPE="text/html">Fact Sheet</A> -
				<A HREF="download.html" TYPE="text/html">Free Source Code</A> -
				<A HREF="sites.html" TYPE="text/html">Fortran Links</A> -
				<A HREF="mailto:dnagle@erols.com">Email us</A> </P>
<!--Return to top of this page. -->
			 <P ALIGN="CENTER"><A HREF="#top">Back to the Top</A> </P> </TD> 
		</TR> 
	 </TABLE> </BODY>
</HTML>
