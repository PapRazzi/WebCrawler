<HTML>
<HEAD>
<TITLE>  ATLAS BINARY DSP-DAQ: using Fortran  </TITLE>
</HEAD>


<BODY>


<!-- ================  Welcome  =================== -->


<br><br>
<center>
<h1>Using Fortran in Microsoft Visual C++ </h1>
</center>
<br><br>

<p>
Fortran routines are included in C-code using the cfortran packages,
and the cernlibs. The cernlibs are compiled as a dynamic lib library so 
your c-code has to be compiled as a dll.
</p>

<h2> Microsoft Developer Studio Settings </h2>

<p>
From the menu chose <i>Build</i> and the <i>Settings</i> menu item.
The <i>Fortran</i>, <i>C/C++</i> and <i>Link</i> items 
have to be changed as follows. 
</p>

<pre>
  Fortran
  category: Fortran Libraries
      Using run time library: Multithreaded DLL
            

  C/C++
  category:  Code Generation
      Using run time library: Multithreaded DLL

  Link
  category:  input
     ignore libraries:     
            libc.lib, libcmt.lib, libcd.lib, libcmtd.lib, msvcrtd.lib
</pre>


<h2> Example </h2>

There are the following files:

<dl>

   <dt> <a href = "main.c">main.c</a>
   <dd> The main.c files defines the pawc common block.
         
   <dt> <a href = "hb.c">hb.c</a>
   <dd> hb.c contains the two functions which show how histograms and 
        ntuples are booked.
 
   <dt> <a href = "cfortran.h">cfortran.h</a>
   <dd> The standard cfortran.h include file (copied from CERN).
        This file should be edited at all.
 
   <dt> <a href = "hbook.h">hbook.h</a>
   <dd> hbbok.h contains the definition of the cernlib/hbook functions.
        Your own fortran subroutines definitions has to go in here.

</dl>

There is a <a href = "uf.tar">tar file</a> that contains all four files. 

Good luck.

<HR> 
<!-- ================  Back  =================== -->


Back to
<A HREF = "/groups/silicon/ATLAS/DaqLab/index.html">
          Daq Page</a>
or
<A HREF = "/groups/silicon/index.html">
          Silicon home page</a>

<br>
<br>

<A HREF="http://scipp.ucsc.edu/groups/silicon/addr/wilko_addr.html">
comments or questions :</A> <BR>

<BR>
<hr>
<A HREF="." TARGET="_top"> <IMG SRC="/pics/new/door_open.gif" HSPACE=5 ALIGN=BOTTOM BORDER=0></A> 
<FONT SIZE=2>Break out of frames to bookmark page thereafter.</FONT>



</BODY>
</HTML>

